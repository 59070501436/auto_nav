<?xml version="1.0"?>

<launch>

<arg name="robot_name" default="" />
<arg name="tf_prefix" default="" />
<arg name="robot_model" default="$(find auto_nav)/config/robot.yaml"/>
<arg name="model_extras" default="$(find auto_nav)/urdf/sensors_sim.xacro"/>

<arg name="map_file" default="$(find auto_nav)/maps/white_image.yaml"/>

<!-- model bringup -->
<include file="$(find thorvald_model)/launch/model.launch">
    <arg name="robot_model" value="$(arg robot_model)" />
    <arg name="model_extras" value="$(arg model_extras)" />
</include>

<!-- base bringup-->
<include file="$(find thorvald_base)/launch/base_bringup.launch">
    <arg name="robot_model" value="$(arg robot_model)" />
    <arg name="simple_sim" value="True" />
    <arg name="enable_odom_tf" value="false" />
    <arg name="odom_frame_id" value="odom" />
</include>

<!-- Run the map server -->
<node name="map_server" pkg="map_server" type="map_server" args="$(arg map_file)" />
<node pkg="tf" type="static_transform_publisher" name="link1_broadcaster" args="0.0 0 0.0 0 0 0 1 map base_link 100" />

<!-- Lane Detector -->
<node pkg="auto_nav" name="lane_detection" type="lane_detection.py" output="screen" />

<!-- Display -->
<node pkg="rviz" type="rviz" name="rviz"/>

</launch>
